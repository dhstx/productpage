@import "tailwindcss";
@import "tw-animate-css";
@import "./styles/theme.css";
@import "./styles/theme-overrides.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: 2px;
  --radius-md: 4px;
  --radius-lg: 4px;
  --radius-xl: 4px;
  
  /* DHStx Color System */
  --color-dhstx-black: #0C0C0C;
  --color-dhstx-panel: #1A1A1A;
  --color-dhstx-border: #202020;
  --color-dhstx-text: #F2F2F2;
  --color-dhstx-muted: #B3B3B3;
  --color-dhstx-accent: #FFC96C;
  --color-dhstx-silver: #C0C0C0;
  
  --color-background: var(--dhstx-black);
  --color-foreground: var(--dhstx-text);
  --color-card: var(--dhstx-panel);
  --color-card-foreground: var(--dhstx-text);
  --color-popover: var(--dhstx-panel);
  --color-popover-foreground: var(--dhstx-text);
  --color-primary: var(--dhstx-accent);
  --color-primary-foreground: #000000;
  --color-secondary: var(--dhstx-panel);
  --color-secondary-foreground: var(--dhstx-text);
  --color-muted: var(--dhstx-panel);
  --color-muted-foreground: var(--dhstx-muted);
  --color-accent: var(--dhstx-accent);
  --color-accent-foreground: #000000;
  --color-destructive: #DC2626;
  --color-border: var(--dhstx-border);
  --color-input: var(--dhstx-border);
  --color-ring: var(--dhstx-accent);
}

:root {
  --radius: 4px;
  --background: #0C0C0C;
  --foreground: #F2F2F2;
  --card: #1A1A1A;
  --card-foreground: #F2F2F2;
  --popover: #1A1A1A;
  --popover-foreground: #F2F2F2;
  --primary: #FFC96C;
  --primary-foreground: #000000;
  --secondary: #1A1A1A;
  --secondary-foreground: #F2F2F2;
  --muted: #1A1A1A;
  --muted-foreground: #B3B3B3;
  --accent: #FFC96C;
  --accent-foreground: #000000;
  --destructive: #DC2626;
  --border: #202020;
  --input: #202020;
  --ring: #FFC96C;
  --dhstx-black: #0C0C0C;
  --dhstx-panel: #1A1A1A;
  --dhstx-border: #202020;
  --dhstx-text: #F2F2F2;
  --dhstx-muted: #B3B3B3;
  --dhstx-accent: #FFC96C;
  --dhstx-silver: #C0C0C0;
}

.dark {
  --background: #0C0C0C;
  --foreground: #F2F2F2;
  --card: #1A1A1A;
  --card-foreground: #F2F2F2;
  --popover: #1A1A1A;
  --popover-foreground: #F2F2F2;
  --primary: #FFC96C;
  --primary-foreground: #000000;
  --secondary: #1A1A1A;
  --secondary-foreground: #F2F2F2;
  --muted: #1A1A1A;
  --muted-foreground: #B3B3B3;
  --accent: #FFC96C;
  --accent-foreground: #000000;
  --destructive: #DC2626;
  --border: #202020;
  --input: #202020;
  --ring: #FFC96C;
}

/* Typography clamp scales for mobile-first headings */
:root {
  /* Adjusted to ensure no overflow on 360–430px devices */
  --h1: clamp(1.5rem, 6vw, 3rem);
  --h2: clamp(1.25rem, 5vw, 2.25rem);
  --h3: clamp(1rem, 4vw, 1.5rem);
}

/* Ensure headings wrap/shrink gracefully */
.h1 { font-size: var(--h1); line-height: 1.1; text-wrap: balance; word-break: break-word; }
.h2 { font-size: var(--h2); line-height: 1.1; text-wrap: balance; word-break: break-word; }
.h3 { font-size: var(--h3); line-height: 1.1; text-wrap: balance; word-break: break-word; }

@layer base {
  * {
    @apply border-[#202020] outline-ring/50;
  }
  
  html, body, #root {
    /* Containment defaults + solid black background for mobile */
    @apply min-h-screen w-full max-w-screen overflow-x-hidden;
    background-color: #000000 !important;
  }

  #root {
    /* Prevent horizontal scroll at app root */
    @apply overflow-x-hidden min-w-0;
    background-color: var(--bg, #000000) !important;
  }

  body {
    @apply antialiased;
    color: var(--text, #F2F2F2);
    background-color: var(--bg, #000000) !important;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold uppercase tracking-tight;
    color: var(--primary, var(--text, #F2F2F2));
    font-family: 'Inter', sans-serif;
  }
  
  code, pre, .mono {
    font-family: 'JetBrains Mono', monospace;
  }

  /* Mobile-only: stop iOS focus zoom by ensuring computed font-size >= 16px */
  @media (max-width: 768px) {
    input[type="text"],
    input[type="search"],
    input[type="email"],
    input[type="url"],
    input[type="tel"],
    input[type="password"],
    input[type="number"],
    input[type="datetime-local"],
    textarea,
    select {
      font-size: max(16px, 1rem);
      line-height: 1.4;
      -webkit-text-size-adjust: 100%;
    }

    /* Common headless/Radix/shadcn triggers acting like inputs */
    .input,
    .textarea,
    .select-trigger,
    [data-slot="input"],
    [data-slot="textarea"],
    [data-slot="select-trigger"],
    [role="textbox"],
    [role="combobox"],
    [contenteditable="true"] {
      font-size: max(16px, 1rem);
    }

    /* If any component forces <16px, out-rank it */
    .input,
    .textarea,
    .select-trigger,
    [data-slot="input"],
    [data-slot="textarea"],
    [data-slot="select-trigger"] {
      font-size: 16px !important;
    }
  }

  /* Also enforce on touch-only devices (e.g., tablets with coarse pointers) */
  @media (hover: none) and (pointer: coarse) {
    :where(input, textarea, select) {
      font-size: 16px !important;
      line-height: 1.4;
    }
  }

  /* Normalize text size adjustments across mobile browsers */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

@layer components {
  /* DHStx System Buttons */
  .btn-system {
    /* Make system buttons wrap-safe, full-width on mobile, minimum 44px tappable height */
    @apply inline-flex w-full sm:w-auto max-w-full items-center justify-center gap-2 px-4 py-3 min-h-[44px] rounded-[2px] border border-[#202020] bg-[#C0C0C0] text-black font-medium transition-all duration-200 text-pretty text-balance break-words overflow-hidden;
  }
  
  .btn-system:hover,
  .btn-system:active {
    @apply bg-[#FFC96C] text-black;
  }
  
  /* DHStx Panels */
  .panel-system {
    @apply bg-[#1A1A1A] border border-[#202020] rounded-[4px];
  }
  
  /* DHStx Mini Box */
  .mini-box {
    @apply border-b border-[#202020] last:border-b-0 transition-colors duration-200;
  }
  
  .mini-box:hover {
    @apply bg-[#1A1A1A];
  }
  
  /* DHStx Text Utilities */
  .text-primary {
    color: var(--fg-strong, var(--text, #F2F2F2));
  }
  
  .text-secondary {
    @apply text-[#B3B3B3];
  }
  
  .text-accent {
    @apply text-[#FFC96C];
  }
  
  .bg-system {
    @apply bg-[#0C0C0C];
  }
  
  .bg-panel {
    @apply bg-[#1A1A1A];
  }
  
  .bg-accent {
    @apply bg-[#FFC96C];
  }

  /* removed fixed inch-based top padding; use responsive utilities in markup */
}

/* Header height CSS variable fallback for SSR/hydration */
:root {
  --site-header-height: 64px;
}

/* Chat hero spacing under fixed header (safe-area aware) */
.chat-hero {
  /* Lower the hero by extra 0.5in site-wide */
  padding-top: calc(var(--site-header-height, 64px) + 0.5in + 1.5rem + env(safe-area-inset-top));
  position: relative;
  z-index: 10;
}

@media (max-width: 640px) {
  .chat-hero {
    padding-top: calc(var(--site-header-height, 64px) + 0.5in + 1rem + env(safe-area-inset-top));
  }
}

/* Subtle, attached Show History pill */
.history-pill {
  position: absolute;
  left: 12px;
  bottom: calc(100% + 8px);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(229,170,93,0.06); /* subtle gold tint */
  border: 1px solid rgba(229,170,93,0.16);
  color: var(--foreground, #F2F2F2);
  box-shadow: none;
  cursor: pointer;
}
.history-pill .history-label { color: var(--foreground, #F2F2F2); }
.history-pill:focus-visible { outline: 2px solid #e5aa5d; outline-offset: 2px; }
@media (max-width: 640px) {
  .history-pill { left: 8px; bottom: calc(100% + 6px); font-size: 0.82rem; padding: 6px; gap: 0; border-radius: 9999px; }
  .history-pill .history-label { display: none; }
}

/* Responsive wrapping for hero/typewriter to avoid clipping on mobile */
.chat-hero h1 {
  font-size: clamp(28px, 7.5vw, 64px);
  line-height: 1.08;
  word-break: break-word;
}
.chat-hero .typewriter,
.chat-hero .subhead {
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  font-size: clamp(16px, 4.5vw, 24px);
}

#syntek-welcome-typewriter {
  position: relative;
  display: inline-block;
}

#syntek-welcome-typewriter .welcome-text {
  position: relative;
  display: inline-block;
  white-space: pre-wrap;
  text-align: center;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  text-transform: inherit;
  color: inherit;
}

#syntek-welcome-typewriter .welcome-placeholder {
  visibility: hidden;
  display: inline-block;
  white-space: pre-wrap;
}

#syntek-welcome-typewriter .welcome-first,
#syntek-welcome-typewriter .welcome-rest,
#syntek-welcome-typewriter .typewriter-typed {
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  text-transform: inherit;
  color: #B3B3B3;
}

#syntek-welcome-typewriter .welcome-rest .agent-name,
#syntek-welcome-typewriter .typewriter-typed .agent-name {
  font-weight: inherit;
}

#syntek-welcome-typewriter .welcome-typewriter {
  position: absolute;
  inset: 0;
  display: inline-block;
  text-align: center;
  white-space: pre-wrap;
  pointer-events: none;
}

#syntek-welcome-typewriter .typewriter-typed {
  display: inline;
  vertical-align: middle;
}

#syntek-welcome-typewriter .typewriter-cursor {
  display: inline-block;
  width: 8px;
  height: 1em;
  background: currentColor;
  border-radius: 1px;
  margin-left: 6px;
  vertical-align: middle;
  opacity: 1;
  transition: opacity 300ms ease;
  animation: tw-caret-blink 1s steps(1, end) infinite;
  will-change: opacity;
}

@keyframes tw-caret-blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

#syntek-welcome-typewriter .typewriter-cursor.done {
  animation: none;
  opacity: 0;
  transition: opacity 280ms ease;
}

@media (prefers-reduced-motion: reduce) {
  #syntek-welcome-typewriter .typewriter-cursor {
    animation: none;
    opacity: 1;
  }

  #syntek-welcome-typewriter .typewriter-cursor.done {
    opacity: 0;
    transition: opacity 200ms linear;
  }
}

@media (max-width: 768px) {
  #syntek-welcome-typewriter .welcome-rest {
    display: block;
    text-align: center;
  }

  #syntek-welcome-typewriter .welcome-rest .agent-name {
    display: inline-block;
  }
}

/* Agent selector dots */
.agent-dot { vertical-align: middle; flex-shrink: 0; }
.agent-label { vertical-align: middle; }

/* History card legibility: visible on mobile, high-contrast on desktop */
.history-card {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.88);
  padding: 1.25rem;
  border-radius: 8px;
  min-height: 80px;
  display: block;
  box-shadow: 0 1px 0 rgba(0,0,0,0.5) inset;
}
.history-card .panel-system {
  background: transparent;
  border-color: rgba(255,255,255,0.08);
}
.history-card :where(h3, p, span, li) {
  color: rgba(255,255,255,0.88);
}
@media (max-width: 640px) {
  .history-card { padding: 0.9rem; min-height: 64px; }
}

@layer utilities {
  /* Global wrap utilities mirroring spec */
  .overflow-wrap-anywhere { overflow-wrap: anywhere; }
  .text-balance { text-wrap: balance; }
  .text-pretty { text-wrap: pretty; }
  .break-words { word-break: break-word; overflow-wrap: break-word; }

  /* Ensure flex/grid children can shrink to avoid overflow */
  .min-w-0 { min-width: 0; }
  .max-w-screen { max-width: 100vw; }

  .tracking-tighter {
    letter-spacing: -0.05em;
  }

  /* Safe-area utility for bottom elements (iOS) */
  .pb-safe {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  /* Standardized spacing utilities for mobile consistency */
  .spacing-xs { margin: 0.5rem; }
  .spacing-sm { margin: 1rem; }
  .spacing-md { margin: 1.5rem; }
  .spacing-lg { margin: 2rem; }
  .spacing-xl { margin: 3rem; }

  /* Minimum button spacing for mobile tappability */
  .btn-spacing { margin: 0.5rem; }
  @media (max-width: 768px) {
    .btn-spacing { margin: 0.5rem 0; }
  }

  /* Optional compact visuals: looks ~14px but computes as 16px */
  @media (max-width: 768px) {
    .input--compact, .textarea--compact {
      font-size: 16px;                 /* prevents zoom */
      transform: scale(0.875);         /* ~14px look */
      transform-origin: left center;
      /* counter the scale so the box size doesn’t shrink */
      padding: calc(12px / 0.875) calc(14px / 0.875);
    }
  }

  /* Theme token utilities (A11y + Theming) */
  .text-fg { color: var(--fg, var(--text)); }
  .text-muted-fg { color: var(--muted-fg, var(--muted)); }
  .bg-card { background-color: var(--card, var(--card-bg)); }
  .border-token { border-color: var(--border); }
  .ring-offset-bg { --tw-ring-offset-color: var(--bg); }
  .ring-accent { --tw-ring-color: var(--accent); }
  .ring-destructive { --tw-ring-color: var(--destructive); }
}

/* Up-fade utility for chatbox */
.up-fade { opacity: 0; transform: translateY(12px); transition: opacity 420ms cubic-bezier(.2,.9,.3,1), transform 420ms cubic-bezier(.2,.9,.3,1); pointer-events: none; }
.up-fade.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }

/* Plug-and-play chips: 50% slower up-fade */
.plug-chip { transition: opacity 630ms cubic-bezier(.2,.9,.3,1), transform 630ms cubic-bezier(.2,.9,.3,1); }

/* H1 glitchy flicker then left→right reveal */
@keyframes glitchFlicker {
  0% { opacity: 0; text-shadow: none; }
  10% { opacity: 0.9; text-shadow: 0 0 8px rgba(255,255,255,0.06); }
  20% { opacity: 0; transform: translateX(-6px); }
  30% { opacity: 0.85; transform: translateX(-2px); text-shadow: 0 0 10px rgba(255,255,255,0.08); }
  45% { opacity: 0; transform: translateX(-8px); }
  60% { opacity: 0.95; transform: translateX(-1px); text-shadow: 0 0 12px rgba(255,255,255,0.12); }
  100% { opacity: 1; transform: translateX(0); text-shadow: none; }
}
@keyframes leftReveal {
  from { clip-path: inset(0 100% 0 0); opacity: 0; transform: translateX(-14px); }
  to   { clip-path: inset(0 0 0 0); opacity: 1; transform: translateX(0); }
}
/* Ensure H1 occupies layout with final size but is initially invisible */
.syntek-h1 { opacity: 0; transform: translateX(0); }
/* Run both animations concurrently and 15% slower */
.syntek-h1.h1-visible {
  animation:
    glitchFlicker 920ms steps(6, end) forwards,
    leftReveal 1035ms ease forwards;
}
/* Static fallback for JS-controlled visibility */
.syntek-h1.show { opacity: 1; transform: none; clip-path: inset(0 0 0 0); }

/* Mobile center for Select Agent trigger */
@media (max-width:640px) {
  .select-agent { margin-left: auto; margin-right: auto; display: block; text-align: center; }
}

@media (prefers-reduced-motion: reduce) {
  .up-fade, .syntek-h1 { transition: none !important; animation: none !important; opacity: 1 !important; transform: none !important; }
}

/* Cog visuals removed: styles deleted to avoid residual spacing */

/* Light Mode — Strategic Clarity */
html[data-theme="light"] {
  /* Strategic Clarity global tokens */
  --bg: #F7F7F8;              /* background canvas */
  --bg-elev: #FFFFFF;         /* elevated surfaces */
  --band: #F2F2F4;            /* light section band */
  --text: #141414;            /* primary text */
  --text-muted: #3A3A3C;      /* secondary text */
  --brand: #E4B850;           /* gold */
  --brand-soft: #FFF5D9;      /* soft gold background */
  --brand-ink: #231A10;       /* dark ink for gold */
  --link: #0E5CAD;            /* action/link */
  --border: #D9D9DE;          /* subtle divider */
  --focus: #3B82F6;           /* accessible focus */
  --icon: #1C1C1E;            /* icon color */
  --shadow: 0 6px 24px rgba(20, 14, 6, 0.08);

  /* Optional foreground semantic aliases for components */
  --fg-strong: #111827;   /* primary text on light */
  --fg-muted: #4B5563;    /* secondary/muted text */
  --fg-disabled: #9CA3AF; /* disabled text */

  /* Map to existing CSS variables used across the system */
  --background: var(--bg);
  --foreground: var(--text);
  --card: var(--bg-elev);
  --card-foreground: var(--text);
  --popover: var(--bg-elev);
  --popover-foreground: var(--text);
  --primary: var(--brand);
  --primary-foreground: #1B140A; /* deep ink for legibility on gold */
  --secondary: var(--bg-elev);
  --secondary-foreground: var(--text);
  --muted: var(--bg-elev);
  --muted-foreground: var(--text-muted);
  --accent: var(--brand);
  --accent-foreground: #1B140A;
  --destructive: #DC2626;
  --border: var(--border);
  --input: var(--border);
  --ring: var(--focus);

  /* Back-compat for custom variables */
  --dhstx-black: var(--bg);
  --dhstx-panel: var(--bg-elev);
  --dhstx-border: var(--border);
  --dhstx-text: var(--text);
  --dhstx-muted: var(--text-muted);
  --dhstx-accent: var(--brand);
  --dhstx-silver: #999999;
}

/* Ensure light canvas wins over dark base (overrides !important) */
html[data-theme="light"],
html[data-theme="light"] body,
html[data-theme="light"] #root {
  background-color: var(--bg) !important;
  color: var(--text);
}

/* Typography adjustments for breathability in light */
html[data-theme="light"] body {
  letter-spacing: 0.02em;
  line-height: 1.55;
  font-weight: 400;
}
html[data-theme="light"] h1,
html[data-theme="light"] h2,
html[data-theme="light"] h3,
html[data-theme="light"] h4,
html[data-theme="light"] h5,
html[data-theme="light"] h6 {
  color: var(--text);
}

/* Ensure base text elements use high-contrast ink */
html[data-theme="light"] p,
html[data-theme="light"] span,
html[data-theme="light"] li {
  color: var(--text);
}

/* Ensure borders adapt to light tokens */
html[data-theme="light"] * {
  border-color: var(--border);
}

/* Links */
html[data-theme="light"] a {
  color: var(--link);
  text-decoration: none;
  text-underline-offset: 2px;
}
html[data-theme="light"] a:hover {
  text-decoration: underline;
}

/* Avoid low-contrast gold-on-white text */
html[data-theme="light"] .text-accent {
  color: var(--brand-ink);
}

/* Buttons - system */
html[data-theme="light"] .btn-system {
  background-color: var(--brand);
  color: #1B140A; /* not pure black for warmth */
  border-color: var(--border);
  transition: transform 150ms ease, box-shadow 150ms ease, background-color 150ms ease, color 150ms ease;
}
html[data-theme="light"] .btn-system:hover,
html[data-theme="light"] .btn-system:active {
  transform: translateY(-1px);
  box-shadow: var(--shadow);
}

/* Primary button alias (for any legacy usage) */
html[data-theme="light"] .btn-primary {
  background: var(--brand);
  color: var(--brand-ink);
  box-shadow: 0 2px 10px rgba(228,184,80,0.25);
}

/* Panels & Cards */
html[data-theme="light"] .panel-system {
  background-color: var(--bg-elev);
  border-color: var(--border);
  border-radius: 8px;
  box-shadow: var(--shadow);
}

/* Mini rows */
html[data-theme="light"] .mini-box { border-color: var(--border); }
html[data-theme="light"] .mini-box:hover { background-color: var(--bg); }

/* Badges */
html[data-theme="light"] .badge, html[data-theme="light"] [data-variant="badge"] {
  background-color: var(--brand-soft);
  color: var(--brand-ink);
  border: 1px solid color-mix(in oklab, var(--brand) 40%, var(--brand-soft));
}

/* Icons */
html[data-theme="light"] svg.lucide {
  color: var(--icon);
  stroke: currentColor;
  stroke-width: 1.95px; /* 1.9–2px per spec */
}
html[data-theme="light"] [role="img"] svg { stroke-width: 1.95px; }

/* Focus rings */
html[data-theme="light"] :where(button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])):focus-visible {
  outline: 3px solid var(--focus);
  outline-offset: 2px;
}

/* Global light-mode elevated surfaces */
html[data-theme="light"] header,
html[data-theme="light"] nav,
html[data-theme="light"] section,
html[data-theme="light"] footer,
html[data-theme="light"] .card,
html[data-theme="light"] .panel,
html[data-theme="light"] .surface {
  background: var(--bg-elev);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
}

/* Section bands */
html[data-theme="light"] .section--band,
html[data-theme="light"] .band,
html[data-theme="light"] .alt-section {
  background: var(--band);
  color: var(--text);
}

/* Buttons & chips */
html[data-theme="light"] .btn--primary { background: var(--brand); color: var(--brand-ink); }
html[data-theme="light"] .badge--gold,
html[data-theme="light"] .chip--gold {
  background: var(--brand-soft);
  color: var(--brand-ink);
  border: 1px solid #F2DEB3;
}

/* Map system background utilities for light */
html[data-theme="light"] .bg-system { background: var(--bg) !important; }
html[data-theme="light"] .bg-panel { background: var(--bg-elev) !important; border-color: var(--border) !important; }

/* Settings page panels should follow tokens */
html[data-theme="dark"] .settings-panel {
  background-color: var(--bg-elev);
  color: var(--text);
  border: 1px solid var(--border);
}
html[data-theme="light"] .settings-panel {
  background-color: var(--bg);
  color: var(--text);
  border: 1px solid var(--border);
}

/* Anti-leak overrides to neutralize dark utilities in light mode */
html[data-theme="light"] .bg-black,
html[data-theme="light"] .bg-neutral-900,
html[data-theme="light"] .bg-\[\#0b0b0b\],
html[data-theme="light"] [class*="bg-[#0b0b0b]"] {
  background-color: var(--band) !important;
}
html[data-theme="light"] .text-white,
html[data-theme="light"] .text-neutral-300 { color: var(--text) !important; }
html[data-theme="light"] .border-neutral-800,
html[data-theme="light"] .divide-neutral-800 { border-color: var(--border) !important; }

/* Map frequent arbitrary Tailwind hex utilities to light tokens */
html[data-theme="light"] .bg-\[\#000\],
html[data-theme="light"] .bg-\[\#000000\],
html[data-theme="light"] [class*="bg-[#000"] {
  background-color: var(--band) !important;
}
html[data-theme="light"] .bg-\[\#0C0C0C\],
html[data-theme="light"] [class*="bg-[#0C0C0C]"],
html[data-theme="light"] .bg-\[\#1A1A1A\],
html[data-theme="light"] [class*="bg-[#1A1A1A]"] {
  background-color: var(--bg-elev) !important;
}
html[data-theme="light"] [class*="text-[#F2F2F2]"],
html[data-theme="light"] [class*="text-[#B3B3B3]"] {
  color: var(--text) !important;
}
html[data-theme="light"] [class*="border-[#202020]"],
html[data-theme="light"] [class*="divide-[#202020]"] {
  border-color: var(--border) !important;
}

/* Typography & icons specifics */
html[data-theme="light"] body { font-size: 16px; line-height: 1.55; letter-spacing: .02em; }
html[data-theme="light"] h1,
html[data-theme="light"] h2,
html[data-theme="light"] h3 { color: #121212; font-weight: 750; }
html[data-theme="light"] .muted { color: var(--text-muted); }
html[data-theme="light"] svg,
html[data-theme="light"] .icon { color: var(--icon); stroke: currentColor; stroke-width: 1.9; fill: none; }
html[data-theme="light"] :focus-visible { outline: 3px solid var(--focus); outline-offset: 3px; border-radius: 8px; }

/* Specific component fixes to avoid dark-on-light conflicts */
html[data-theme="light"] #syntek-heading {
  color: var(--text) !important;
  text-shadow: none !important;
  filter: none !important;
}

/* Broader anti-leak coverage for common dark utility classes */
html[data-theme="light"] .bg-neutral-950,
html[data-theme="light"] .bg-zinc-950,
html[data-theme="light"] .bg-\[\#111\],
html[data-theme="light"] .bg-\[\#111111\],
html[data-theme="light"] [class*="bg-[#111]"],
html[data-theme="light"] [class*="bg-[#202020]"] {
  background-color: var(--band) !important;
}
/* Also neutralize frequent app-specific dark hex utilities */
html[data-theme="light"] .bg-\[\#0c0c0c\],
html[data-theme="light"] [class*="bg-[#0c0c0c]"],
html[data-theme="light"] .bg-\[\#1a1a1a\],
html[data-theme="light"] [class*="bg-[#1a1a1a]"] {
  background-color: var(--bg-elev) !important;
}
html[data-theme="light"] .fill-white { fill: var(--icon) !important; }
html[data-theme="light"] .stroke-white { stroke: var(--icon) !important; }

/* === Agent Select — Light-mode legibility ============================ */
/* Scope only the main hero selector trigger and its children */
html[data-theme="light"] .agent-select__trigger {
  color: var(--fg-strong, var(--text));
}
html[data-theme="light"] .agent-select__trigger .agent-select__placeholder {
  color: var(--fg-muted, var(--text-muted));
}
html[data-theme="light"] .agent-select__trigger .agent-select__icon {
  color: var(--fg-muted, #6B7280);
  opacity: 0.9;
}
html[data-theme="light"] .agent-select__trigger:hover {
  color: var(--fg-strong, var(--text));
}
html[data-theme="light"] .agent-select__trigger:focus-visible {
  outline: 2px solid var(--brand, var(--ring));
  outline-offset: 2px;
}
html[data-theme="light"] .agent-select__trigger[aria-disabled="true"] {
  color: var(--fg-disabled, #9CA3AF);
}

/* Theme ripple (created dynamically on light-mode entry) */
.theme-ripple {
  position: fixed;
  left: 0;
  top: 0;
  width: 180vmax;
  height: 180vmax;
  transform: translate(-50%, -50%) scale(0);
  background: radial-gradient(circle at center, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.6) 40%, rgba(255,255,255,0) 70%);
  pointer-events: none;
  z-index: 999998;
  will-change: transform, opacity;
  animation: theme-ripple-expand 600ms ease-out forwards;
  contain: layout paint style;
}

@keyframes theme-ripple-expand {
  to {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0;
  }
}

/* (Removed) theme toast styles per bleed transition spec */

/* Reduced motion: disable ripple animation */
@media (prefers-reduced-motion: reduce) {
  .theme-ripple { display: none !important; }
}

/* Accessibility - Improved color contrast */
.text-[#666666] {
  color: #666666 !important; /* WCAG AA compliant */
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* (Removed) Theme Phase Wipe; replaced by Theme Bleed transition */

/* === Light-mode legibility for form controls & menus =============== */
html[data-theme="light"] select,
html[data-theme="light"] .select,
html[data-theme="light"] .dropdown,
html[data-theme="light"] .dropdown-menu,
html[data-theme="light"] [role="listbox"],
html[data-theme="light"] .menu,
html[data-theme="light"] .listbox,
html[data-theme="light"] .combobox,
html[data-theme="light"] .autocomplete {
  background: var(--bg-elev) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
  box-shadow: 0 2px 10px rgba(20,14,6,.08);
}

html[data-theme="light"] option,
html[data-theme="light"] [role="option"],
html[data-theme="light"] .menu-item,
html[data-theme="light"] .dropdown-item {
  background: var(--bg-elev) !important;
  color: var(--text) !important;
}

html[data-theme="light"] .menu-item:hover,
html[data-theme="light"] .dropdown-item:hover,
html[data-theme="light"] [role="option"][aria-selected="true"] {
  background: var(--band) !important;
  color: var(--text) !important;
}

html[data-theme="light"] .menu a,
html[data-theme="light"] .dropdown a {
  color: var(--link) !important;
  text-decoration: none;
}

html[data-theme="light"] .menu a:hover,
html[data-theme="light"] .dropdown a:hover {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Icons inside controls/menus */
html[data-theme="light"] .dropdown svg,
html[data-theme="light"] .menu svg,
html[data-theme="light"] .select svg {
  color: var(--icon) !important;
  stroke: currentColor !important;
  stroke-width: 1.9 !important;
}

/* Disabled states remain readable */
html[data-theme="light"] :where(select, .dropdown, .menu) :where(:disabled, [aria-disabled="true"]) {
  color: var(--text-muted) !important;
  opacity: .8;
}

/* === THEME BLEED TRANSITION ======================================= */
:root {
  --theme-bleed-duration: 2000ms;
}

/* Overlay that sits above everything and gets "eaten" by the new theme */
/* theme-bleed overlay removed */

/* theme-bleed directional animations removed */

/* Organic edge made from a noisy polygon so it looks like "bleeding" */
/* keyframes bleed-ltr removed */

/* keyframes bleed-rtl removed */

/* Reduced motion users: no animation */
/* reduced-motion overrides related to theme-bleed removed */


/* SYNTEK AUTOMATIONS Hero Image Styles */
.syntek-image-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 2in;
  margin-bottom: 2in;
}

/* Ensure SVG stays visible and sized on small screens */
@media (max-width: 640px) {
  .syntek-image-container { margin-top: 1.25in; margin-bottom: 1.25in; }
  #syntek-svg { max-width: 90vw; height: auto; display: block; }
}

.syntek-hero {
  width: 1024px;
  height: auto;         /* keep aspect ratio */
  max-width: 100%;      /* responsive */
}

/* One-time fade-in utility (opacity + slight up-translate) */
.fade-once { opacity: 0; transform: translateY(8px); transition: opacity 900ms ease, transform 900ms ease; }
.fade-once.is-visible { opacity: 1; transform: none; }
@media (prefers-reduced-motion: reduce){ .fade-once{ transition: none; opacity: 1; transform: none; } }

/* Reusable reveal animations */
.reveal-up   { opacity: 0; transform: translateY(10px); transition: opacity 500ms ease, transform 500ms ease; }
.reveal-left { opacity: 0; transform: translateX(-10px); transition: opacity 500ms ease, transform 500ms ease; }
.reveal-right{ opacity: 0; transform: translateX(10px);  transition: opacity 500ms ease, transform 500ms ease; }
.reveal-show { opacity: 1; transform: none; }

@media (prefers-reduced-motion: reduce){
  .reveal-up, .reveal-left, .reveal-right { transition: none; transform: none; opacity: 1; }
}

/* Up-fade on mount utility */
.upfade-on-mount { opacity: 0; transform: translateY(8px); transition: opacity 450ms ease, transform 450ms ease; }
.upfade-on-mount.is-live { opacity: 1; transform: none; }
@media (prefers-reduced-motion: reduce){ .upfade-on-mount{ transition: none; opacity: 1; transform: none; } }

/* gentle reveal utility */
.reveal { opacity: 0; transform: translateY(8px); transition: opacity 600ms ease, transform 600ms ease; }
.reveal.show { opacity: 1; transform: none; }
@media (prefers-reduced-motion: reduce){ .reveal, .fade-once { opacity: 1 !important; transform: none !important; transition: none !important; } }

/* Syntek title — default visible unless animating */
.syntek-title, #syntek-heading {
  opacity: 1;
  transform: none;
}
.syntek-title.will-animate, #syntek-heading.reveal {
  opacity: 0;
  transform: translateX(12px);
  transition: opacity 650ms ease, transform 650ms ease;
}
.syntek-title.is-live, #syntek-heading.show {
  opacity: 1;
  transform: none;
}

@media (prefers-reduced-motion: reduce){
  .cb-reveal.will-animate,
  .syntek-title.will-animate,
  #syntek-automations-hero .fade-once {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
  /* Keep broader reduced-motion safeguard */
  .reveal-up, .reveal-left, .reveal-right, .cb-reveal, .syntek-title, .fade-once { transition: none; opacity: 1; transform: none; }
}

