/**
 * Theme Override Utilities
 * Ensures all hardcoded Tailwind colors adapt to light/dark themes
 */

/* Text color overrides for light mode */
[data-theme="light"] .text-gray-900,
[data-theme="light"] .text-gray-800,
[data-theme="light"] .text-gray-700 {
  color: var(--text) !important;
}

[data-theme="light"] .text-gray-600,
[data-theme="light"] .text-gray-500 {
  color: var(--text-muted) !important;
}

[data-theme="light"] .text-gray-400 {
  color: var(--muted) !important;
}

/* Dark mode text overrides */
[data-theme="dark"] .text-gray-900,
[data-theme="dark"] .text-gray-800,
[data-theme="dark"] .text-gray-700 {
  color: var(--text) !important;
}

[data-theme="dark"] .text-gray-600,
[data-theme="dark"] .text-gray-500 {
  color: var(--muted) !important;
}

[data-theme="dark"] .text-gray-400 {
  color: rgba(255,255,255,0.4) !important;
}

/* Background overrides for light mode */
[data-theme="light"] .bg-gray-100,
[data-theme="light"] .bg-gray-50 {
  background-color: var(--bg-elev) !important;
}

[data-theme="light"] .bg-gray-200 {
  background-color: var(--band) !important;
}

/* Dark mode background overrides */
[data-theme="dark"] .bg-gray-100,
[data-theme="dark"] .bg-gray-50 {
  background-color: rgba(255,255,255,0.04) !important;
}

[data-theme="dark"] .bg-gray-200 {
  background-color: rgba(255,255,255,0.08) !important;
}

/* Link colors - maintain brand consistency */
[data-theme="light"] .text-blue-600,
[data-theme="light"] .text-blue-700 {
  color: var(--link) !important;
}

[data-theme="dark"] .text-blue-600,
[data-theme="dark"] .text-blue-700 {
  color: #60a5fa !important;
}

/* Success/info colors */
[data-theme="light"] .text-green-800,
[data-theme="light"] .bg-green-50 {
  color: #166534 !important;
  background-color: rgba(34,197,94,0.1) !important;
}

[data-theme="dark"] .text-green-800,
[data-theme="dark"] .bg-green-50 {
  color: #4ade80 !important;
  background-color: rgba(34,197,94,0.15) !important;
}

/* Error/warning colors */
[data-theme="light"] .text-red-800,
[data-theme="light"] .bg-red-50 {
  color: #991b1b !important;
  background-color: rgba(220,38,38,0.1) !important;
}

[data-theme="dark"] .text-red-800,
[data-theme="dark"] .bg-red-50 {
  color: #f87171 !important;
  background-color: rgba(220,38,38,0.15) !important;
}

/* Info/accent colors */
[data-theme="light"] .bg-blue-100,
[data-theme="light"] .text-blue-800,
[data-theme="light"] .text-blue-900 {
  background-color: rgba(59,130,246,0.1) !important;
  color: #1e40af !important;
}

[data-theme="dark"] .bg-blue-100,
[data-theme="dark"] .text-blue-800,
[data-theme="dark"] .text-blue-900 {
  background-color: rgba(59,130,246,0.15) !important;
  color: #93c5fd !important;
}

/* Border colors */
[data-theme="light"] .border-gray-200,
[data-theme="light"] .border-gray-300 {
  border-color: var(--border) !important;
}

[data-theme="dark"] .border-gray-200,
[data-theme="dark"] .border-gray-300 {
  border-color: var(--card-border) !important;
}

/* Hover states */
[data-theme="light"] .hover\:bg-gray-50:hover,
[data-theme="light"] .hover\:bg-gray-100:hover {
  background-color: var(--band) !important;
}

[data-theme="dark"] .hover\:bg-gray-50:hover,
[data-theme="dark"] .hover\:bg-gray-100:hover {
  background-color: rgba(255,255,255,0.06) !important;
}

/* Icon colors */
[data-theme="light"] svg.text-gray-400,
[data-theme="light"] .text-gray-400 svg {
  color: var(--muted) !important;
}

[data-theme="dark"] svg.text-gray-400,
[data-theme="dark"] .text-gray-400 svg {
  color: rgba(255,255,255,0.4) !important;
}

/* Status badge colors */
[data-theme="light"] .bg-yellow-100 {
  background-color: rgba(234,179,8,0.1) !important;
}

[data-theme="light"] .text-yellow-800 {
  color: #854d0e !important;
}

[data-theme="dark"] .bg-yellow-100 {
  background-color: rgba(234,179,8,0.15) !important;
}

[data-theme="dark"] .text-yellow-800 {
  color: #fde047 !important;
}

/* Purple/indigo colors */
[data-theme="light"] .text-indigo-600 {
  color: #4f46e5 !important;
}

[data-theme="dark"] .text-indigo-600 {
  color: #a5b4fc !important;
}

/* Orange colors */
[data-theme="light"] .hover\:text-orange-500:hover {
  color: #f97316 !important;
}

[data-theme="dark"] .hover\:text-orange-500:hover {
  color: #fb923c !important;
}

/* Yellow colors */
[data-theme="light"] .hover\:text-yellow-500:hover {
  color: #eab308 !important;
}

[data-theme="dark"] .hover\:text-yellow-500:hover {
  color: #fde047 !important;
}

/* White text in dark mode */
[data-theme="dark"] .text-white {
  color: var(--text) !important;
}

/* Ensure form inputs adapt */
[data-theme="light"] input,
[data-theme="light"] textarea,
[data-theme="light"] select {
  background-color: #ffffff !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] select {
  background-color: rgba(255,255,255,0.04) !important;
  color: var(--text) !important;
  border-color: var(--card-border) !important;
}

/* Disabled states */
[data-theme="light"] input:disabled,
[data-theme="light"] textarea:disabled,
[data-theme="light"] select:disabled {
  background-color: var(--band) !important;
  color: var(--muted) !important;
  opacity: 0.7;
}

[data-theme="dark"] input:disabled,
[data-theme="dark"] textarea:disabled,
[data-theme="dark"] select:disabled {
  background-color: rgba(255,255,255,0.02) !important;
  color: var(--muted) !important;
  opacity: 0.6;
}

/* === Light-mode readability fallbacks for dashboard tabs === */
html[data-theme="light"] {
  /* Provide safe defaults if tokens are missing */
  --text: #121212;
  --muted: #444;
  --card-bg: #ffffff;
  --card-border: #cccccc;
  --accent: #c58f2b; /* fallback accent */
}

/* Light mode fix for key sections */
html[data-theme="light"] .dashboard,
html[data-theme="light"] .platforms,
html[data-theme="light"] .platforms-page,
html[data-theme="light"] .team {
  color: var(--text) !important;
  background: var(--card-bg);
}

html[data-theme="light"] .card,
html[data-theme="light"] [class*="bg-neutral"],
html[data-theme="light"] .border-dark {
  background: var(--card-bg) !important;
  border-color: var(--card-border) !important;
  color: var(--text) !important;
}

html[data-theme="light"] .muted,
html[data-theme="light"] .text-muted {
  color: var(--muted) !important;
}

/* Sleek custom scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: color-mix(in srgb, var(--accent-gold) 80%, var(--border));
  border-radius: 12px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: color-mix(in srgb, var(--accent-gold) 100%, var(--border));
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

/* Firefox scrollbar */
.custom-scrollbar {
  scrollbar-color: color-mix(in srgb, var(--accent-gold) 80%, var(--border)) transparent;
  scrollbar-width: thin;
}

/* Agent bio panel entrance animation */
@keyframes panelFadeIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}
.agent-bio-panel {
  animation: panelFadeIn 0.25s ease-out;
}

/* === Banners: keep them stuck under the header and opaque === */
/* Target common banner selectors used in the codebase. If your banner uses a different classname,
   add it to this list (e.g., .founding-banner). 
   Use position: sticky so banners remain in the flow (no duplicate visual height) and will stick below the header. */
.dhstx-banner,
.banner,
.page-banner,
.founding-banner {
  position: -webkit-sticky;
  position: sticky;
  top: calc(var(--site-header-height, 64px)); /* stick directly under the fixed header */
  left: 0;
  right: 0;
  width: 100%;
  z-index: 100 !important; /* above header:90 */

  /* Normalize visual box model so banner doesn't look doubled in height */
  box-sizing: border-box;
  margin: 0;
  padding: 0.45rem 0.75rem;   /* compact and consistent */
  min-height: var(--banner-height, 44px);
  display: block;
  line-height: 1.15; /* avoid tall line-height */

  /* Use the theme surface token; fallback to near-opaque if missing */
  background-color: var(--bg-elev, rgba(17,17,17,0.96)) !important;
  border-bottom: 1px solid var(--card-border) !important;
  box-shadow: 0 1px 0 rgba(0,0,0,0.04);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  pointer-events: auto;
}

/* Small content wrapper inside the banner (if present) should not add extra height */
.dhstx-banner > .banner-inner,
.banner > .banner-inner,
.page-banner > .banner-inner,
.founding-banner > .banner-inner {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Hide duplicated sibling banners to prevent doubled-height visuals */
.dhstx-banner + .dhstx-banner,
.banner + .banner,
.page-banner + .page-banner,
.founding-banner + .founding-banner,
.dhstx-banner ~ .dhstx-banner,
.banner ~ .banner {
  display: none !important;
  visibility: hidden !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure banner text / items don't increase the banner height unexpectedly */
.dhstx-banner * { line-height: 1.15; }

/* Fallback: if a page places a banner as a direct child of body */
body > .dhstx-banner,
body > .banner,
body > .page-banner {
  position: relative !important;
  z-index: 100 !important;
}

/* Small nicety: prevent rapid shift for users with reduced motion disabled */
@media (prefers-reduced-motion: no-preference) {
  .dhstx-banner,
  .banner,
  .page-banner,
  .founding-banner { transition: transform 160ms ease; }
}

/* === Global header: make it fixed and follow the user === */
/* Make primary <header> fixed site-wide so it follows on scroll */
/* COMMENTED OUT: This global override prevents component-level sticky positioning */
/*
header {
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  z-index: 90 !important;
  height: var(--site-header-height, 64px) !important;
  background: var(--bg) !important;
  border-bottom: 1px solid var(--card-border);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  box-shadow: 0 1px 0 rgba(0,0,0,0.04);
}
*/

/* Ensure page content is not hidden under the fixed header */
/* Provide banner height token for consistent offsets */
:root { --banner-height: 44px; }

/* COMMENTED OUT: Padding assumes fixed header, not needed with sticky */
/*
main {
  padding-top: calc(var(--site-header-height, 64px) + var(--banner-height, 44px) + 1rem) !important;
}
*/

/* Safe-area support on mobile devices with notches */
/* COMMENTED OUT: Mobile overrides assume fixed header */
/*
@media (max-width: 768px) {
  header {
    height: calc(var(--site-header-height, 64px) + env(safe-area-inset-top));
    padding-top: env(safe-area-inset-top);
  }
  main {
    padding-top: calc(var(--site-header-height, 64px) + env(safe-area-inset-top) + var(--banner-height, 44px) + 1rem) !important;
  }
}
*/

/* Respect reduced motion preference while keeping a small polish transition */
/* COMMENTED OUT: Let components control their own transitions */
/*
@media (prefers-reduced-motion: no-preference) {
  header { transition: background 140ms ease, transform 140ms ease; }
}
*/

/* === Dashboard/admin header fallback === */
/* Some admin/dashboard components may use custom header containers — ensure they are fixed too */
.admin-header,
.dashboard-header,
.site-header {
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100 !important;
  background: var(--bg) !important;
  border-bottom: 1px solid var(--card-border);
}

/* === Login / sign-in page banner opacity fix (scoped) === */
.themed-screen .dhstx-banner,
.themed-screen .banner,
.themed-screen .page-banner,
.themed-screen .founding-banner {
  background-color: var(--bg-elev, rgba(17,17,17,0.98)) !important;
  background-image: none !important;
  opacity: 1 !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  border-bottom: 1px solid var(--card-border) !important;
  box-shadow: 0 1px 0 rgba(0,0,0,0.04) !important;
}

.themed-screen .dhstx-banner > .banner-inner,
.themed-screen .banner > .banner-inner,
.themed-screen .page-banner > .banner-inner,
.themed-screen .founding-banner > .banner-inner {
  background: transparent;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
